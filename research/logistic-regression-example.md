# การวิเคราะห์ความสัมพันธ์ระหว่างตัวแปรและประสิทธิภาพของโรงไฟฟ้า

## 1. สถานการณ์เริ่มต้น

ในอุตสาหกรรมผลิตไฟฟ้า เรามีข้อมูลโรงไฟฟ้า 300 แห่ง ซึ่งถูกแบ่งเป็น 2 กลุ่มตามประสิทธิภาพ:
- กลุ่มประสิทธิภาพสูง: 150 แห่ง
- กลุ่มประสิทธิภาพต่ำ: 150 แห่ง

### ข้อมูลเบื้องต้นของแต่ละกลุ่ม

**กลุ่มประสิทธิภาพสูง**:
- fuel_cost: เฉลี่ย 2.15 บาท/หน่วย (SD = 0.30)
- capacity_MW: เฉลี่ย 420 MW (SD = 50)
- operational_hrs: เฉลี่ย 7,850 ชั่วโมง/ปี (SD = 400)

**กลุ่มประสิทธิภาพต่ำ**:
- fuel_cost: เฉลี่ย 3.75 บาท/หน่วย (SD = 0.40)
- capacity_MW: เฉลี่ย 580 MW (SD = 80)
- operational_hrs: เฉลี่ย 6,400 ชั่วโมง/ปี (SD = 500)

### การคำนวณ odds ของแต่ละโรงไฟฟ้า

สำหรับแต่ละโรงไฟฟ้า องค์กรได้คำนวณและเก็บค่า odds ไว้ โดยใช้แบบจำลอง logistic regression ที่พัฒนาขึ้นจากข้อมูลในอดีต:

```
log(p/(1-p)) = -4.2 - 1.8×fuel_cost - 0.005×capacity_MW + 0.0003×operational_hrs
```

ตัวอย่างโรงไฟฟ้า A จากกลุ่มประสิทธิภาพสูง มีข้อมูล:
- fuel_cost = 2.2 บาท/หน่วย
- capacity_MW = 410 MW
- operational_hrs = 7,900 ชั่วโมง/ปี

คำนวณ log-odds:
```
log(p/(1-p)) = -4.2 - 1.8×2.2 - 0.005×410 + 0.0003×7900
            = -4.2 - 3.96 - 2.05 + 2.37
            = -7.84
```

คำนวณ odds:
```
odds = e^(-7.84) = 0.00039
```

ค่า odds นี้ถูกเก็บไว้ในฐานข้อมูลของบริษัทสำหรับโรงไฟฟ้า A

## 2. การเปลี่ยนแปลงเกิดขึ้น

ต่อมา เกิดการเปลี่ยนแปลงในอุตสาหกรรม ซึ่งส่งผลให้ต้นทุนเชื้อเพลิง (fuel_cost) เพิ่มขึ้นโดยเฉลี่ย 1 บาท/หน่วย องค์กรจึงต้องการทราบว่าการเปลี่ยนแปลงนี้มีผลต่อการจัดกลุ่มโรงไฟฟ้าหรือไม่

## 3. การทดสอบ t-test

เพื่อตรวจสอบว่ายังคงมีความแตกต่างระหว่างกลุ่มประสิทธิภาพสูงและต่ำ องค์กรทำการทดสอบ t-test:

### ขั้นตอนการคำนวณ t-test สำหรับ fuel_cost:

1) **คำนวณค่าเฉลี่ยใหม่ของทั้งสองกลุ่ม**:
   - x̄₁ = 3.15 (กลุ่มประสิทธิภาพสูง) - เพิ่มขึ้น 1 บาท/หน่วย
   - x̄₂ = 4.75 (กลุ่มประสิทธิภาพต่ำ) - เพิ่มขึ้น 1 บาท/หน่วย

2) **คำนวณค่าเบี่ยงเบนมาตรฐานร่วม (pooled standard deviation)**:
   ```
   sp = √[((n₁-1)s₁² + (n₂-1)s₂²)/(n₁+n₂-2)]
   sp = √[((150-1)×0.3² + (150-1)×0.4²)/(150+150-2)]
   sp = √[(149×0.09 + 149×0.16)/298]
   sp = √[(13.41 + 23.84)/298]
   sp = √[37.25/298]
   sp = √0.125
   sp = 0.354
   ```

3) **คำนวณค่าความคลาดเคลื่อนมาตรฐาน (standard error)**:
   ```
   SE = sp × √(1/n₁ + 1/n₂)
   SE = 0.354 × √(1/150 + 1/150)
   SE = 0.354 × √(0.0067 + 0.0067)
   SE = 0.354 × √0.0134
   SE = 0.354 × 0.116
   SE = 0.041
   ```

4) **คำนวณค่า t-statistic**:
   ```
   t = (x̄₁ - x̄₂) / SE
   t = (3.15 - 4.75) / 0.041
   t = -1.6 / 0.041
   t = -39.02
   ```

5) **ตัดสินใจทางสถิติ**:
   - ค่า t-statistic = -39.02 มีขนาดใหญ่มาก
   - p-value ≈ 0 (น้อยกว่า 0.001 มาก)
   - ปฏิเสธ H₀ และสรุปว่ายังคงมีความแตกต่างอย่างมีนัยสำคัญของ fuel_cost ระหว่างกลุ่ม

## 4. การวิเคราะห์ Logistic Regression

เพื่อทราบผลกระทบของการเปลี่ยนแปลง องค์กรทำการวิเคราะห์ logistic regression อีกครั้ง:

1) **สร้างโมเดลใหม่**:
   ```
   log(p/(1-p)) = -3.8 - 1.7×fuel_cost - 0.004×capacity_MW + 0.0003×operational_hrs
   ```

2) **คำนวณ Odds Ratio จากสัมประสิทธิ์ใหม่**:
   - Odds Ratio ของ fuel_cost = e^(-1.7) = 0.183
   - Odds Ratio ของ capacity_MW = e^(-0.004) = 0.996
   - Odds Ratio ของ operational_hrs = e^(0.0003) = 1.0003

## 5. การประเมินผลกระทบต่อโรงไฟฟ้า A

โรงไฟฟ้า A ซึ่งมี odds เดิม = 0.00039 ได้รับผลกระทบจากการเพิ่มขึ้นของ fuel_cost:

1) **วิธีที่ 1: คำนวณโดยใช้แบบจำลองใหม่**
   เมื่อ fuel_cost เพิ่มเป็น 3.2 บาท/หน่วย (เพิ่มขึ้น 1 บาท):
   ```
   log(p/(1-p)) = -3.8 - 1.7×3.2 - 0.004×410 + 0.0003×7900
                = -3.8 - 5.44 - 1.64 + 2.37
                = -8.51
   
   odds ใหม่ = e^(-8.51) = 0.0002
   ```

2) **วิธีที่ 2: ใช้ odds เดิมและ odds ratio**
   ```
   odds ใหม่ = odds เดิม × (odds ratio)^ΔX
   odds ใหม่ = 0.00039 × 0.183^1
   odds ใหม่ = 0.00039 × 0.183
   odds ใหม่ = 0.000071
   ```

3) **คำนวณความน่าจะเป็นใหม่**:
   ```
   p = odds / (1 + odds) = 0.000071 / 1.000071 = 0.000071
   ```
   
   ดังนั้น โอกาสที่โรงไฟฟ้า A จะยังคงอยู่ในกลุ่มประสิทธิภาพสูงลดลงเหลือเพียง 0.0071%

## 6. สรุปกระบวนการ

1. **เริ่มต้น**: องค์กรมีข้อมูลโรงไฟฟ้า 2 กลุ่ม พร้อมคำนวณค่า odds ของแต่ละโรงไฟฟ้าและเก็บไว้
2. **เมื่อมีการเปลี่ยนแปลง**: องค์กรทำ t-test เพื่อตรวจสอบว่ายังมีความแตกต่างระหว่างกลุ่มหรือไม่
3. **วิเคราะห์ผลกระทบ**: ทำ logistic regression เพื่อหา odds ratio ใหม่
4. **ประเมินสถานการณ์**: ใช้ odds เดิมที่เก็บไว้คูณกับ odds ratio เพื่อประเมินผลกระทบต่อแต่ละโรงไฟฟ้า
5. **ตัดสินใจทางธุรกิจ**: นำผลการวิเคราะห์ไปใช้วางแผนปรับปรุงประสิทธิภาพโรงไฟฟ้าหรือกำหนดกลยุทธ์ธุรกิจ

การเก็บค่า odds ไว้ตั้งแต่เริ่มต้นช่วยให้องค์กรสามารถประเมินผลกระทบของการเปลี่ยนแปลงได้อย่างรวดเร็วและแม่นยำ โดยไม่ต้องคำนวณโมเดลใหม่ทั้งหมดทุกครั้ง
